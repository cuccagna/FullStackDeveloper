<!DOCTYPE html>

<html lang="it">

    <head>

        <meta charset="UTF-8">
        <title>Web Worker senza worker</title>
        
        <script type="text/javascript">
            var numero;
            var numeroChiamate=0;
            var timer;
            
            //Si poteva usare anche un semplice ciclo. Ma poi era difficile stopparlo
        	function impostaNumero()
        	{
        		var number = document.sequenza.elements["numero"].value;
        		if(number)
        		{
        			numero = number;
        			if(numeroChiamate>0) //pulisci il timer precedente
        				clearInterval(timer);
        			
        			numeroChiamate++;
        			timer = setInterval(aggiornaNumero,300);
        		}
        		else
        			alert("Valore non valido");
        		
        	}
        	
        	function aggiornaNumero()
        	{
        			numero *=2;
        			document.getElementById("num").textContent += numero + " ";
        	}
        	
        	function stopSequenza()
        	{
        		if(timer)
        		{
        			numeroChiamate=0;
        			clearInterval(timer);
        		}
        	}
        </script>

    </head>

    <body>
    
        <form name="sequenza" method="post">
            <label for="numero">Scegli un numero</label>
        	<input name="numero" id="numero" type="number" min="1" max="10" required/>
        	<input type="button" name="start" id="start" value="inizia sequenza" onClick="impostaNumero()"/>
            <input type="button" value="ferma sequenza" onClick="stopSequenza()"/>
        </form>
        
        <div id="num"></div>

    </body>

</html>